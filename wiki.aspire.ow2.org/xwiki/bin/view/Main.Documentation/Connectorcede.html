<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">

<!-- Mirrored from wiki.aspire.ow2.org/xwiki/bin/view/Main.Documentation/Connector?xpage=code& by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 23 Mar 2015 17:39:41 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<title>
Aspire Wiki - ObjectWeb - Connector
</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="NAGIOS" content="OK" >
<meta name="revisit-after" content="3 days" />
<meta name="description" content="Wiki Website" />
<meta name="keywords" content="objectweb Open Source Middleware" />
<meta name="distribution" content="GLOBAL" />
<meta name="rating" content="General" />
<meta name="copyright" content="Copyright 2005-2006, ObjectWeb Consortium" />
<meta name="author" content="objectweb" />
<meta http-equiv="reply-to" content="webmaster@objectweb.org" />
<meta name="language" content="en" />
<link rel="alternate" type="application/rss+xml" title="ObjectWeb News RSS Feed" href="../Main/BlogRss7f1d?xpage=rdf" />
<link type="image/x-icon" href="../../download/XWiki/MySkin/ow.ico" rel="icon" />
<link type="image/x-icon" href="../../download/XWiki/MySkin/ow.ico" rel="shortcut icon" />
<link href="../../skin/XWiki/MySkin/style.css" rel="stylesheet" type="text/css"  />
<link href="../../skin/XWiki/MySkin/style.css" rel="stylesheet" type="text/css" title="default" />
<link href="../../skin/XWiki/MySkin/style.css" rel="alternate stylesheet" type="text/css"  title="Alternate StyleSheet 1" />
<style type="text/css">

</style>
<style type="text/css">

</style>

<script type="text/javascript" src="../../../skins/default/skin.js"></script>
<script type="text/javascript" src="../../../skins/default/prototype.js"></script>
<script type="text/javascript" src="../../../skins/default/xwiki.js"></script>
<script type="text/javascript" src="../../../skins/default/browserdetect.js"></script>
</head>
<body>

<div id="owlinks">
<a href="http://www.ow2.org/">&nbsp;Consortium&nbsp;</a>&nbsp;&nbsp;<a href="http://www.ow2.org/xwiki/bin/view/Activities/Fundamentals">&nbsp;Activities&nbsp;</a>&nbsp;&nbsp;<a href="http://www.ow2.org/xwiki/bin/view/Activities/Projects">&nbsp;Projects&nbsp;</a>&nbsp;&nbsp;<a href="http://forge.objectweb.org/">&nbsp;Forge&nbsp;</a>&nbsp;&nbsp;<a href="http://www.ow2.org/view/Events/">&nbsp;Events&nbsp;</a>
</div>

<div id="xwikibanner" style="height: 95px">
<div id="xwikilogo" style="top: 20px;">
    <a href="../Main/index.html">
<img src="../../download/XWiki/MySkin/logo.png" alt="ObjectWeb logo" />
    </a>
  </div>

<div id="xwikilinks">
  <div id="xwikimenu">
<br/>
<a href="../../login/XWiki/XWikiLogin4570.html?xredirect=http://wiki.aspire.ow2.org/xwiki/bin/view/Main.Documentation/Connector?xpage=code&amp;">Log-in</a><br />
<a href="http://consortium.objectweb.org/registration.html">Register</a>
  </div>
  <div id="xwikititle">
   <h1><a href='Connector.html'>Connector</a></h1>
  </div>
</div>
</div>

  <div class="xwiki0a" id="xwikinav_header">
  <div id="xwikiwebusermenu">
    <span id="xwikiwebusermenutitle">Space Menu</span>
    <a href="http://consortium.objectweb.org/">Consortium</a><span> | </span>
<a href="http://solutions.objectweb.org/">Solutions</a><span> | </span>
<a href="http://middleware.objectweb.org/">Middleware</a><span> | </span>
<a href="http://forge.objectweb.org/">Forge</a><span> | </span>
<a href="http://myobjectweb.objectweb.org/">MyObjectWeb</a><span> | </span>

  </div>
  <div id="xwikieditmenu">
                          <a href="../../pdf/Main.Documentation/Main.Documentation_Connector.pdf" class="img"><img src="../../../skins/default/pdf.gif" alt="PDF" title="PDF"/>PDF</a><span class="xwikisep"> | </span>
    <a href="Connectord5a0.html?xpage=history#aspire" class="img"><img src="../../../skins/default/history.gif" alt="History" title="History"/>History</a><span class="xwikisep"> | </span>
    <div id="xwikimoreactions">
      <div id="xwikimoreactionstitle"><a href="#" onclick="showhide('xwikimoreactionsitems'); return false;">More Actions</a></div>
      <div id="xwikimoreactionsitems">
        <div class="xwikimenutitle">View</div>
                  <span class="xwikimoreactionitem"><a href="../../viewrev/Main.Documentation/Connectorcede.html?xpage=code&amp;#aspire">Code</a></span><span class="xwikisep"> | </span>
                <span class="xwikimoreactionitem"><a href="Connectord77f?xpage=xml&amp;">XML</a></span><span class="xwikisep"> | </span>
                        <div class="xwikimenutitle">Help</div>
        <span class="xwikimoreactionitem"><a href="../Doc/index.html">Documentation</a></span><span class="xwikisep"> | </span>
        <span class="xwikimoreactionitem"><a href="../Doc/XWikiSyntax.html">XWiki Syntax</a></span><span class="xwikisep"> | </span>
      </div>
    </div>
  </div>
  <div id="xwikilanguagemenu">
    
  </div>
  </div>

<div id="xwikieditcontent">
<textarea id='content' rows='70' name='content' cols='80'>1 Connector

----
#toc(&#34;&#34; &#34;&#34; &#34;&#34;)
----


1.1 Introduction

In this section we will provide information regarding the deployment and the configuration of the connector components.

The connector is composed by two collaborating components the server part and the client part. These terms should not be taken with their strict meaning because both components act at some time in their lifecycle as a server and as a client. These terms represent their position in the AspireRFID framework. The connector server is located next two the EPCIS component and the connector client is located next to the client application that requires information from EPCIS. They act as proxies to automate the process of communicating with an EPCIS repository. More information about the role of the connectors can be acquired from Aspire's deliverable [2.4 Requirements and specifications&#62;http://fp7-aspire.eu/fileadmin/aspire/docs/D2_4.pdf]. 

1.1 Users Guide

1.1.1 Deployment

Both connector components are designed to work in a Java application server (e.g. tomcat) so they are provided as a web archive (i.e. war). The connector client can also be embedded within a client application if required. This means that it can function either within a web container or in standalone mode, functionality that can be selected through configuration files.
Instructions on how to deploy the provided war files are dependent on the application server that you may choose to use. For the latest version of tomcat, all you have to do is place a copy of the war files within the webapps directory located at the tomcat installation folder.


1.1.1 Configuration 

Configuration files exist within the war files under the folder props with the name *application.properties*. You can either edit them before deployment or after deployment based on your needs and on the application server that you are using. Following we will describe the configuration options for each connector component.

1.1.1.1 Connector server
This is the configuration file of the connector server. We will explain each one of the configuration options.
{code}
callbackDestinationUrl=http://localhost:8899
epcisQueryIfceUrl=http://localhost:8080/epcis/query
epcisCaptureIfceUrl=http://localhost:8080/epcis/capture
queryName=SimpleEventQuery
timeDifferenceFromUTC=+02:00
{code}

*callbackDestinationUrl*: This generally does not need to be changed. It defines a TCP server where query subscriptions to the EPCIS repository will return their results to. If this is defined incorrectly the connector will not be able to receive any query results from the EPCIS repository.

*epcisQueryIfceUrl*: This property holds the location of the EPCIS query interface that we are interested in getting information from, as defined by the [EPCglobal EPCIS standard&#62;http://www.epcglobalinc.org/standards/epcis]

*epcisCaptureIfceUrl*: This is the URL of location of the EPCIS capture interface.

*queryName*: The only available query name is the SimpleEventQuery. Unless another query is implemented at the EPCIS query interface, this should not be changed.

*timeDifferenceFromUTC*: This is the time difference of the local time from the [UTC&#62;http://en.wikipedia.org/wiki/Utc] or [GMT&#62;http://en.wikipedia.org/wiki/Gmt]. It is required for the generation of specific EPCIS events. The format is Â±HH:MM.

1.1.1.1 Connector client
{code}
connectorServerUrl = http://localhost:8080/Connector-1.0/connector
{code}

*connectorServerUrl*: The endpoint of the connector server. The first part, i.e. ~~http://localhost:8080/Connector-1.0~~ is the location where the connector server has been deployed. The second part, i.e. ~~connector~~ is the web service that the client uses to communicate with the server and subscribe for new queries.

*isConnectorClientStandaloneModeOn*: Possible values: true or false. This defines whether the connector client is deployed as a standalone web application or is embedded within a client application. If this property is set to *false* and the war file is deployed to an application server, an embedded servlet will be used to deploy the web services of the connector client. On the other hand, if this property is set to true, an embedded trivial application server will be opened by the connector client, on the port defined by the *standaloneConnectorClientPort* property, and the web service will be deployed on this server.

1.1 Developers Guide

The Connector components provide SOAP based web services to subscribe to new EPCIS transactions and to receive new events information. As it has been mentioned above there are two components than compose the Connector functionality: The Connector Server or Connector Engine and the Connector Client.

1.1.1 Connector Engine

This component is responsible for receiving query (subscription or polling) requests from the client, to translate this information to EPCIS query information and then forward any event details from the EPCIS repository to the connector client via the web service that the client exposes.
The engine provides two web services to start and stop a transaction observation. The *startObservingTransaction* and the *stopObservingTransaction*. Both of these operations require (among others) a specific type of object to be passwd that encapsulates all mandatory and optional information for the query, the *SubscriptionParameters* object.

*SubscriptionParameters*
{code}
&#60;xs:complexType name=&#34;subscriptionParameters&#34;&#62;
    &#60;xs:sequence&#62;
        &#60;xs:element name=&#34;doPoll&#34; type=&#34;xs:boolean&#34;/&#62;
        &#60;xs:element minOccurs=&#34;0&#34; name=&#34;initialTime&#34; type=&#34;xs:dateTime&#34;/&#62;
        &#60;xs:element minOccurs=&#34;0&#34; name=&#34;queryDayOfMonth&#34; type=&#34;xs:string&#34;/&#62;
        &#60;xs:element minOccurs=&#34;0&#34; name=&#34;queryDayOfWeek&#34; type=&#34;xs:string&#34;/&#62;
        &#60;xs:element minOccurs=&#34;0&#34; name=&#34;queryHour&#34; type=&#34;xs:string&#34;/&#62;
        &#60;xs:element minOccurs=&#34;0&#34; name=&#34;queryMin&#34; type=&#34;xs:string&#34;/&#62;
        &#60;xs:element minOccurs=&#34;0&#34; name=&#34;queryMonth&#34; type=&#34;xs:string&#34;/&#62;
        &#60;xs:element minOccurs=&#34;0&#34; name=&#34;querySec&#34; type=&#34;xs:string&#34;/&#62;
        &#60;xs:element minOccurs=&#34;0&#34; name=&#34;replyEndpoint&#34; type=&#34;xs:string&#34;/&#62;
        &#60;xs:element name=&#34;reportIfEmpty&#34; type=&#34;xs:boolean&#34;/&#62;
        &#60;xs:element minOccurs=&#34;0&#34; name=&#34;subscriptionId&#34; type=&#34;xs:string&#34;/&#62;
        &#60;xs:element minOccurs=&#34;0&#34; name=&#34;transactionId&#34; type=&#34;xs:string&#34;/&#62;
        &#60;xs:element minOccurs=&#34;0&#34; name=&#34;transactionType&#34; type=&#34;xs:string&#34;/&#62;
    &#60;/xs:sequence&#62;
&#60;/xs:complexType&#62;
{code}

* *doPoll*: If false, then a new subscription will be registered within the EPCIS with information that is provided with other elements. If true then the query will be executed only once. Mandatory for new subscriptions.
* *initialTime*: This parameter defines the time constraint after which all matching events will be returned. If doPoll is false, and the initialTime refers to the past, the old matching events will be returned within the first response message. Mandatory for new subscriptions.
* *queryX*: This category of parameters define the time interval that the query will be executed within the EPCIS repository if doPoll is false. At least one of the parameters should be defined in this case. These parameters take a comma separated list of integers that define the query schedule. For example, if querySec has the value ~~1,31~~ then the query will be executed on the 1st and 31st second of every minute. For more information you should read chapter ~~8.2.5.3 Query Schedule~~ of the ~~EPCglobal EPC Information Services (EPCIS) Version 1.0.1 Specification~~. Mandatory for new subscriptions.
* *replyEndpoint*: Defines the web service endpoint of the Connector Client that query results should be posted to. Mandatory for new subscriptions.
* *reportIfEmpty*: Indicates whether a query result will be send to the Connector client even if there is no matching event. Mandatory for new subscriptions.
* *subscriptionId*: Should be a universally unique identifier to identify a subscription. Mandatory if doPoll false.
* *transactionId*: Indicates the events that we are interested in. Mandatory for new subscriptions and for deletions.
* *transactionType*: Indicates the optional event type that we are interested in. Optional. Mandatory in deletions only if it had been defined in the initial subscription.

The *startObservingTransaction operation* requires this object as a parameter. 

The *stopObservingTransaction operation* takes as a parameter a subscription parameters object along with a boolean value which indicates if the transaction id that we want to stop observing has been completed, in order to send a Transaction Event to the EPCIS repository and delete the transaction designated in the SubscriptionParameters object. If the deletion of the  transaction is not required then the parameters construct should only contain the subscriptionId element.

Refer to the {attach:ConnectorEngine.wsdl} for the web service definition.

1.1.1 Connector client

This component is responsible for receiving query (subscription or polling) requests from a software that uses the client component, submit the query to the Connector Engine and receive query responses from the latter.
The component provides one web services to receive events from the engine based on subscribed or polled queries. This operation is called asynchronously from the engine when event information is available and receives an Event object that encapsulates information provided by EPCIS events which are defined by the EPCIS 1.0.1 specification.

*Event*
{code}
&#60;xs:complexType name=&#34;event&#34;&#62;
    &#60;xs:sequence&#62;
        &#60;xs:element minOccurs=&#34;0&#34; name=&#34;action&#34; type=&#34;xs:string&#34;/&#62;
        &#60;xs:element minOccurs=&#34;0&#34; name=&#34;bizLocationId&#34; type=&#34;xs:string&#34;/&#62;
        &#60;xs:element minOccurs=&#34;0&#34; name=&#34;bizStepId&#34; type=&#34;xs:string&#34;/&#62;
        &#60;xs:element maxOccurs=&#34;unbounded&#34; minOccurs=&#34;0&#34; name=&#34;bizTransactionList&#34; nillable=&#34;true&#34; type=&#34;xs:string&#34;/&#62;
        &#60;xs:element maxOccurs=&#34;unbounded&#34; minOccurs=&#34;0&#34; name=&#34;childEpcs&#34; nillable=&#34;true&#34; type=&#34;xs:string&#34;/&#62;
        &#60;xs:element minOccurs=&#34;0&#34; name=&#34;dispositionId&#34; type=&#34;xs:string&#34;/&#62;
        &#60;xs:element minOccurs=&#34;0&#34; name=&#34;epcClass&#34; type=&#34;xs:string&#34;/&#62;
        &#60;xs:element maxOccurs=&#34;unbounded&#34; minOccurs=&#34;0&#34; name=&#34;epcList&#34; nillable=&#34;true&#34; type=&#34;xs:string&#34;/&#62;
        &#60;xs:element name=&#34;eventTime&#34; type=&#34;xs:long&#34;/&#62;
        &#60;xs:element minOccurs=&#34;0&#34; name=&#34;parentId&#34; type=&#34;xs:string&#34;/&#62;
        &#60;xs:element name=&#34;quantity&#34; type=&#34;xs:int&#34;/&#62;
        &#60;xs:element minOccurs=&#34;0&#34; name=&#34;readPointId&#34; type=&#34;xs:string&#34;/&#62;
        &#60;xs:element minOccurs=&#34;0&#34; name=&#34;subscriptionId&#34; type=&#34;xs:string&#34;/&#62;
    &#60;/xs:sequence&#62;
&#60;/xs:complexType&#62;
{code}

Refer to the {attach:ConnectorClient.wsdl} for the web service definition.

The client can be either deployed separately in an application server, e.g. Apache Tomcat, or it may be embedded within a client application and deploy the web service through an embedded Jetty application server. The first task is done automatically. The second is done by calling the *startStandaloneMode* method of the org.ow2.aspirerfid.connectors.client.ConnectorClientImpl class. 

The client application should implement the *org.ow2.aspirerfid.connectors.api.ClientEventHandler* interface and register itself through the *setEventHandler* of the org.ow2.aspirerfid.connectors.client.ConnectorClientImpl class so that it may receive the events and do the whatever it wants.

The client application should use the org.ow2.aspirerfid.connectors.client.RegistrationManager operations to register or execute new queries passing a SubscriptionParameters object and unregister from existing subscriptions.

1.1.1 Work to do

* Make Connector engine subscription information persistent.




















</textarea>
</div>
<div class="xwiki0a" id="xwikinav_footer"></div>

<div id="xwikifooter" class="clear">
 <div id="xwikidocinfo">
  <a href='../Main/Documentation.html'>Main.Documentation</a> &gt; <a href='Connector.html'>Connector</a>
  (en)
 <br />
  Creator: nektarios
 &nbsp;Date: 2009/01/29 18:03
 <br />
 Last Author: nektarios
 &nbsp;Date: 2009/02/26 16:19
  </div>

 <div id="xwikifooterimage">
 <a href="http://xwiki.objectweb.org/">
 <img src="../../download/XWiki/MySkin/poweredby_xwiki.png" alt="Powered by XWiki" /></a>
 </div>

 <div id="xwikifootertext">
 Copyright (c) 2005-2009, <a href="http://www.ow2.org/">OW2 Consortium</a> | <a href="../Main/Contact.html">contact</a> | <a href="mailto:webmaster@ow2.org">webmaster</a>
 </div>

 <div id="xwikifooterhelp">
 
 </div>
</div>

</body>

<!-- Mirrored from wiki.aspire.ow2.org/xwiki/bin/view/Main.Documentation/Connector?xpage=code& by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 23 Mar 2015 17:39:41 GMT -->
</html>